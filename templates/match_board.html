<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>äººå¯¾äººå¯¾å±€</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <script>
    window.SHOGI ??= {};
    SHOGI.state ??= {};
    SHOGI.state.kifuLenClient ??= 0;
    window.currentKifu ??= [];
    window.isResetting ??= false;
    window.lastSelfKifuLen ??= 0;
    console.log("ğŸ”´ SHOGI.state.kifuLenClient = ",SHOGI.state.kifuLenClient);
  </script>
</head>
<body>
  <script>
    console.log("âœ… HTML ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿè¡Œä¸­");
    // ã©ã“ã‹ä¸€åº¦ã ã‘ï¼ˆèµ·å‹•æ™‚ã™ãï¼‰
    //const S = (window.SHOGI ??= {}).state ??= {};
    //(function guardKifuSetter(){
      //let _k = S.kifuLenClient ?? 0;
      //Object.defineProperty(S, "kifuLenClient", {
        //configurable: true,
        //get(){ return _k; },
        //set(v){
          //console.log("ğŸ“ kifuLenClient set:", _k, "â†’", v, "by", window.__kifuSetReason || "unknown");
          //console.log(new Error("stack for kifuLenClient").stack);
          //_k = v;
        //}
      //});
    //})();

  </script>

  <!-- ãƒ­ã‚°ã‚¤ãƒ³IDè¡¨ç¤ºï¼šå³ä¸Šå›ºå®š -->
  <div id="login-id-display">
    ID: <span id="login-id-text"></span>
  </div>

  <!-- ã‚¿ã‚¤ãƒˆãƒ«ä¸­å¤® -->
  <div style="text-align: center; margin-top: 20px;">
    <div id="title-text" style="font-size: 32px; font-weight: bold;">
      AIå°†æ£‹
    </div>
  </div>
  
  <!-- ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼šå°†æ£‹ç›¤ + å·¦å³ -->
  <div class="main-layout" style="display: flex; margin-top: 10px;">
    
    <!-- å·¦ -->
    <div class="left-panel">
      <div class="captured-area">
        <div class="captured-label">ç›¸æ‰‹ã®é§’å°</div>
        <div id="captured-pieces-opponent" class="captured-box"></div>
      </div>
      <div class="captured-area">
        <div class="captured-label">è‡ªåˆ†ã®é§’å°</div>
        <div id="captured-pieces-self" class="captured-box"></div>
      </div>
    </div>

    <!-- ä¸­å¤® -->
    <div class="center-panel" style="flex: 1; text-align: center;">
      <div id="board-container" style="position: relative; display: inline-block;">
        <div id="board" class="board-area"></div>
        <div id="thinking-banner" style="display:none;"></div>
      </div>
    </div>

    <!-- å³ -->
    <div class="right-panel" id="right-panel"></div>

  </div>

  <script>
    
    const role = "{{ role }}";
    const isSubView = (role === "sub");
    const playerID = "{{ player_id }}";
    const first = "{{ first }}";
    const mainID = "{{ main_id }}";
    const subID = "{{ sub_id }}";

    const opponentID = (playerID === mainID) ? subID : mainID;
    const gameMode = "match";  // å¯¾äººå¯¾å±€ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™

    console.log("ğŸ²å¯¾äººå¯¾å±€ã‚¹ã‚¿ãƒ¼ãƒˆ");
    console.log("ğŸŸ© role =", role);
    console.log("ğŸŸ© playerID =", playerID);
    console.log("ğŸŸ© opponentID =", opponentID);
    console.log("ğŸŸ© first =", first);

    //document.getElementById("login-id-display").innerText = `ğŸ‘¤ ID: ${playerID}`;
    document.getElementById("login-id-text").innerText = `ğŸ‘¤ ${playerID}`;

    console.log("âœ… match_game.js ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ");
  </script>
  <script src="{{ url_for('static', filename='js/match_game.js') }}" defer></script>

</body>
</html>


